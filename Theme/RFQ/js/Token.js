function TokenParse(token) {
    var base64Url = token.split('.')[1];
    var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
    var jsonPayload = decodeURIComponent(window.atob(base64).split('').map(function (c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
    }).join(''));

    return JSON.parse(jsonPayload);
}

function TokenGetCookie(cookieName) {
    var name = cookieName + "=";
    var decodedCookie = decodeURIComponent(document.cookie);
    var cookieArray = decodedCookie.split(';');

    for (var i = 0; i < cookieArray.length; i++) {
        var cookie = cookieArray[i].trim();
        if (cookie.indexOf(name) === 0) {
            return cookie.substring(name.length, cookie.length);
        }
    }

    return null;
}

function GetPersonalDataFromCookie(DataKey) {
    var userToken = TokenGetCookie("HttpCookie=UserToken");
    if (userToken == "" || userToken == null) {
        return "";
    }
    var token_payload = TokenParse(userToken);
    if (token_payload.length == 0) {
        return "";
    }
    return token_payload[DataKey];
}

